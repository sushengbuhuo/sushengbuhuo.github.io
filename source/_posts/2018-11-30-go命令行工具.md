---
title: go命令行工具
date: 2018-11-30 20:19:23
tags:
- go
- 命令行
- 工具
---

### 安装go
```javascript
yum install -y go
[root@VM_0_14_centos shadowsocks]# go version
go version go1.9.4 linux/amd64
[root@VM_0_14_centos shadowsocks]# go env
GOARCH="amd64"
GOBIN=""
GOEXE=""
GOHOSTARCH="amd64"
GOHOSTOS="linux"
GOOS="linux"
GOPATH="/root/go"
GORACE=""
GOROOT="/usr/lib/golang"
GOTOOLDIR="/usr/lib/golang/pkg/tool/linux_amd64"
GCCGO="gccgo"
CC="gcc"
GOGCCFLAGS="-fPIC -m64 -pthread -fmessage-length=0 -fdebug-prefix-map=/tmp/go-build058581188=/tmp/go-build -gno-record-gcc-switches"
CXX="g++"
CGO_ENABLED="1"
CGO_CFLAGS="-g -O2"
CGO_CPPFLAGS=""
CGO_CXXFLAGS="-g -O2"
CGO_FFLAGS="-g -O2"
CGO_LDFLAGS="-g -O2"
PKG_CONFIG="pkg-config"
```
### 百度网盘客户端
```javascript
go get -u https://github.com/iikira/BaiduPCS-Go
BaiduPCS-Go update
# 搜索根目录的文件
BaiduPCS-Go search -path=/ 关键字

# 搜索当前工作目录的文件
BaiduPCS-Go search 关键字

# 递归搜索当前工作目录的文件
BaiduPCS-Go search -r 关键字
```
### 简单图床 AUXPI
```javascript
cd $GOPATH/src
git clone git@github.com:aimerforreimu/AUXPI.git
cd AUXPI/
go get -u github.com/beego/bee
$ bee run auxpi
______
| ___ \
| |_/ /  ___   ___
| ___ \ / _ \ / _ \
| |_/ /|  __/|  __/
\____/  \___| \___| v1.10.0
2018/11/08 19:53:08 INFO     ▶ 0001 Using 'auxpi' as 'appname'
2018/11/08 19:53:08 INFO     ▶ 0002 Initializing watcher...
auxpi/routers
auxpi
2018/11/08 19:53:25 SUCCESS  ▶ 0003 Built Successfully!
2018/11/08 19:53:25 INFO     ▶ 0004 Restarting 'auxpi.exe'...
2018/11/08 19:53:25 SUCCESS  ▶ 0005 './auxpi.exe' is running...
2018/11/08 19:53:25.404 [I] [parser.go:96]  generate router from comments
2018/11/08 19:53:25.407 [I] [parser.go:96]  generate router from comments
2018/11/08 19:53:25.460 [I] [asm_amd64.s:1333]  http server Running on http://:2333
```
### 基于终端的图形活动监视器
```javascript
git clone --depth 1 https://github.com/cjbassi/gotop /tmp/gotop
sh /tmp/gotop/scripts/download.sh
mv gotop /usr/local/bin
go get github.com/cjbassi/gotop
# 直接执行
gotop
```
### 下载视频
```javascript
go get -u github.com/iawia002/annie
$ annie -i https://www.bilibili.com/video/av21877586 https://www.bilibili.com/video/av21990740

 Site:      哔哩哔哩 bilibili.com
 Title:     【莓机会了】甜到虐哭的13集单集MAD「我现在什么都不想干,更不想看14集」
 Type:      video
 Streams:   # All available quality
     [default]  -------------------
     Quality:         高清 1080P
     Size:            51.88 MiB (54403767 Bytes)
     # download with: annie -f default "URL"


 Site:      哔哩哔哩 bilibili.com
 Title:     【莓救了】甜到虐哭！！！国家队单集MAD-当熟悉的bgm响起，眼泪从脸颊滑下
 Type:      video
 Streams:   # All available quality
     [default]  -------------------
     Quality:         高清 1080P
     Size:            77.63 MiB (81404093 Bytes)
     # download with: annie -f default "URL"
```
### 跨平台的网络性能测量工具
```javascript
go get github.com/Microsoft/ethr
[root@VM_0_14_centos ~]# /root/go/bin/ethr -s
Listening on 9991 for control plane
Listening on 9996 for TCP latency tests
Listening on 9998 for TCP conn/s tests
Listening on 9999 for TCP bandwidth tests
Unable to start HTTP server, so HTTP tests cannot be run: listen tcp :8080: bind: address already in use
```
### 海报生成器
```javascript
git clone https://github.com/qbhy/poster-generater.git
cd poster-generater
go build

[root@VM_0_14_centos poster-generater]# ./poster-generater 7877
[GIN-debug] [WARNING] Now Gin requires Go 1.6 or later and Go 1.7 will be required soon.

[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:   export GIN_MODE=release
 - using code:  gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /assets/*filepath         --> poster-generater/vendor/github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (3 handlers)
[GIN-debug] HEAD   /assets/*filepath         --> poster-generater/vendor/github.com/gin-gonic/gin.(*RouterGroup).createStaticHandler.func1 (3 handlers)
[GIN-debug] POST   /poster                   --> main.main.func1 (3 handlers)
[GIN-debug] Listening and serving HTTP on :7877
[GIN] 2018/12/19 - 11:48:03 | 404 |        1.05µs |   218.30.113.34 | GET      /
```
### HTTP(S)代理, 用于抓包调试
```javascript
docker run --name mars -p 8888:8888 -p 9999:9999 -d ouqg/mars:1.0.0
wget https://github.com/ouqiang/mars/releases
解压压缩包
启动: ./mars server
访问代理: http://localhost:8888
查看流量web页: http://localhost:9999, 客户端可扫描二维码下载根证书
```
### 自助 Git 服务
```javascript
sudo su - git
cd ~
# create a folder to install 'go'
mkdir local
# Download go (change go$VERSION.$OS-$ARCH.tar.gz to the latest release)
wget https://storage.googleapis.com/golang/go$VERSION.$OS-$ARCH.tar.gz
# expand it to ~/local
tar -C /home/git/local -xzf go$VERSION.$OS-$ARCH.tar.gz
sudo su - git
cd ~
echo 'export GOROOT=$HOME/local/go' >> $HOME/.bashrc
echo 'export GOPATH=$HOME/go' >> $HOME/.bashrc
echo 'export PATH=$PATH:$GOROOT/bin:$GOPATH/bin' >> $HOME/.bashrc
source $HOME/.bashrc
# 下载并安装依赖
$ go get -u github.com/gogs/gogs

# 构建主程序
$ cd $GOPATH/src/github.com/gogs/gogs
$ go build

cd $GOPATH/src/github.com/gogs/gogs
./gogs web -port 3001 &

2019/01/23 14:16:48 [ WARN] Custom config '/root/go/src/github.com/gogs/gogs/custom/conf/app.ini' not found, igng first time
2019/01/23 14:16:48 [TRACE] Custom path: /root/go/src/github.com/gogs/gogs/custom
2019/01/23 14:16:48 [TRACE] Log path: /root/go/src/github.com/gogs/gogs/log
2019/01/23 14:16:48 [TRACE] Log Mode: Console (Trace)
2019/01/23 14:16:48 [ INFO] Gogs 0.11.85.1225
2019/01/23 14:16:48 [ INFO] Cache Service Enabled
2019/01/23 14:16:48 [ INFO] Session Service Enabled
2019/01/23 14:16:48 [ INFO] Run Mode: Development
2019/01/23 14:16:50 [ INFO] Listen: http://0.0.0.0:3000
2019/01/23 14:16:50 [FATAL] [...rfave/cli/command.go:193 Run()] Failed to start server: listen tcp 0.0.0.0:3000: use
[root@VM_0_14_centos gogs]# lsof -i:3000
COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
docker-pr 3588 root    4u  IPv6  29572      0t0  TCP *:hbci (LISTEN)

修改端口 参考 https://gogs.io/docs/advanced/configuration_cheat_sheet.html
touch custom/conf/app.ini
vi app.ini
[server]

HTTP_PORT = 6666

nginx 反向代理 
server {
    listen 80;
    server_name git.crystalnetwork.us;

    location / {
        proxy_pass http://localhost:3001;
    }
}

访问
 http://118.24.158.116:3001/  如果无法访问，可能是项目在root目录下的原因，重新设置gopath,重新go get和build
 
 λ shs root@118.24.158.116
 PTY allocation request failed on channel 0
 Hi there, You've successfully authenticated, but Gogs does not provide shell access.
 If this is unexpected, please log in with password and setup Gogs under another user.
 Connection to 118.24.158.116 closed.
 Mac平台下，进入~/.ssh目录，之前肯定有了一对密钥，公钥id_rsa.pub和私钥id_rsa。
 使用命令生成新的一对密钥，切记要命名跟原来的密钥不同，ssh-keygen -t rsa -f gogs_id_rsa -C "xiong-wei@hotmail.com"
 在.ssh目录中创建config文件，然后添加如下内容：
 Host 118.24.158.116
 IdentityFile ~/.ssh/gogs_id_rsa
 IdentitiesOnly yes
 
```
### 切换 Git 分支
```javascript
go get -u github.com/royeo/git-checkout-branch
如果你正在使用 GO1.11 Module，使用以下命令进行安装：

GO111MODULE=off go get -u github.com/royeo/git-checkout-branch
建议为 checkout-branch 设置别名，例如 cb，这样就可以直接使用 git cb 来进行分支切换。

git config --global alias.cb checkout-branch
帮助

使用 git checkout-branch help 获取帮助信息。
```
### 命令行压缩和解压
```javascript
go get -u github.com/mholt/archiver/cmd/arc
$ arc archive test.tar.gz file1.txt images/file2.jpg folder/subfolder
$ arc unarchive test.tar.gz

$ arc ls caddy_dist.tar.gz
drwxr-xr-x  matt    staff   0       2018-09-19 15:47:18 -0600 MDT   dist/
-rw-r--r--  matt    staff   6148    2017-08-07 18:34:22 -0600 MDT   dist/.DS_Store
-rw-r--r--  matt    staff   22481   2018-09-19 15:47:18 -0600 MDT   dist/CHANGES.txt
-rw-r--r--  matt    staff   17189   2018-09-19 15:47:18 -0600 MDT   dist/EULA.txt
-rw-r--r--  matt    staff   25261   2016-03-07 16:32:00 -0700 MST   dist/LICENSES.txt
-rw-r--r--  matt    staff   1017    2018-09-19 15:47:18 -0600 MDT   dist/README.txt
-rw-r--r--  matt    staff   288     2016-03-21 11:52:38 -0600 MDT   dist/gitcookie.sh.enc

```
[Golang 新手教程：入门速成指南](https://learnku.com/golang/t/24715)

[go 语言优秀开源项目汇总](https://juejin.im/entry/5c00e5fce51d4550c76d9097?from=timeline&isappinstalled=0)

[使用 go 的 gin 和 gorm 框架来构建 RESTful API 微服务](https://learnku.com/golang/t/24598)

[ Golang 实现 PHP 常用内置函数](https://github.com/syyongx/php2go)

 [golang学习笔记](https://blog.tedxiong.com/use_different_ssh_key_to_login_server_between_gogs_and_user.html)
 
[使用 Gogs 搭建自己的 Git 服务器](https://blog.mynook.info/post/host-your-own-git-server-using-gogs/)

[Go开源项目学习](Go开源项目学习)

[go编码规范](https://github.com/Unknwon/go-code-convention/blob/master/zh-CN/README.md)

[自动生成Restful API文档](https://mp.weixin.qq.com/s?__biz=MzUxNTEwNTg5Mg==&mid=2247485265&idx=1&sn=05054770eb2146903c8756b695690626&chksm=f9baf25acecd7b4c0a8239793cb3075e3de519868d567872a3f4e382042c1bd7c7e59ce3bf99&token=135425060&lang=zh_CN#rd)

[http代理工具](https://github.com/containous/traefik?utm_source=gold_browser_extension)

[【Go学习笔记】2018-12-27](https://segmentfault.com/a/1190000017568794)

[ss代理](https://github.com/v2ray/v2ray-core?utm_source=gold_browser_extension)

[一款极易搭建的自助 Git 服务](https://gogs.io/)

[go教程](https://github.com/astaxie/build-web-application-with-golang/blob/master/zh/preface.md)

[内网穿透的高性能的反向代理应用](https://github.com/fatedier/frp?utm_source=gold_browser_extension)

[监控报警系统](https://github.com/prometheus/prometheus?utm_source=gold_browser_extension)

[初学者的 Go 语言教程](https://github.com/CreatCodeBuild/go-tutorials)

[一个简单高性能的 router](https://learnku.com/articles/23653)

[Go 语言数据结构代码生成器](https://github.com/CreatCodeBuild/gogen)

[go-by-example](http://blog.wuxu92.com/notes-of-go-by-example/)

[go学习](https://github.com/aliliin/Learn-golang)

[去中心化数字资产闪兑平台](https://github.com/ExinOne/ExinCore/blob/master/README_cn.md)

[《 刻意学习 Golang 》](https://learnku.com/articles/25133#topnav)

[《Go语言四十二章经》](https://github.com/ffhelicopter/Go42)

[搭建并行处理管道，感受GO语言魅力](https://www.imooc.com/learn/927)

[A global proxy for go modules](https://goproxy.io/)

[The Central Go Modules Repository](https://search.gocenter.io/stats)

[程序员内功系列--常用命令行工具](https://xiaozhou.net/learn-the-command-line-tools-md-2018-10-11.html)