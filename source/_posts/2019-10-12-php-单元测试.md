---
title: php 单元测试
date: 2019-10-12 16:03:31
tags:
---

### 常用命令
```javascript
新建一个单元测试

php artisan make:test ReplyTest --unit
单独执行某个测试

 phpunit tests/Unit/ReplyTest.php
单独执行某个测试中的函数

phpunit --filter a_thread_has_a_creator
带上测试环境变量进行测试就不需要 CsrfToken

APP_ENV=testing phpunit --filter an_authenticated_user_may_participate_in_forum_threads

APP_ENV=testing phpunit

```
### 测试类例子
```javascript

class TestCase extends Illuminate\Foundation\Testing\TestCase {

	/**
	 * Creates the application.
	 *
	 * @return \Illuminate\Foundation\Application
	 */
	public function createApplication()
	{
		$app = require __DIR__.'/../bootstrap/app.php';

		$app->make('Illuminate\Contracts\Console\Kernel')->bootstrap();

		return $app;
	}

}
class FooTest extends TestCase {

    public function testSomethingIsTrue()
    {
        $this->assertTrue(true);
    }

}
你可以从终端机执行phpunit 命令来执行应用程序的所有测试。

$response = $this->call('GET', 'user/profile');

$response = $this->call($method, $uri, $parameters,  $cookies, $files, $server, $content);
接着你可以检查Illuminate\Http\Response 对象：

$this->assertEquals('Hello World', $response->getContent());
从测试调用控制器

你也可以从测试调用控制器：

$response = $this->action('GET', 'HomeController@index');

$response = $this->action('GET', 'UserController@profile', array('user' => 1));

```
### phpunit.xml
```javascript
<?xml version="1.0" encoding="UTF-8"?>
<phpunit backupGlobals="false"
         backupStaticAttributes="false"
         bootstrap="bootstrap/autoload.php"
         colors="true"
         convertErrorsToExceptions="true"
         convertNoticesToExceptions="true"
         convertWarningsToExceptions="true"
         processIsolation="false"
         stopOnFailure="false"
         syntaxCheck="false">
    <testsuites>
        <testsuite name="Application Test Suite">
            <directory>./tests/</directory>
        </testsuite>
    </testsuites>
    <php>
        <env name="APP_ENV" value="testing"/>
        <env name="CACHE_DRIVER" value="array"/>
        <env name="SESSION_DRIVER" value="array"/>
        <env name="QUEUE_DRIVER" value="sync"/>
    </php>
</phpunit>


```
[Laravel 单元测试那些事](https://learnku.com/articles/17529)

[单元测试](https://wiki.jikexueyuan.com/project/laravel/testing.html)

[PHP单元测试-mock和数据库测试](https://iyaozhen.com/php-unit-test-mock-and-db-test.html)

[测试：入门指南](https://learnku.com/docs/laravel/5.8/testing/3937)

[基于Laravel的项目的单元测试规范](http://0x3f.org/post/unit-testing-standard-for-laravel-based-projects/)

[phpunit文档](https://phpunit.readthedocs.io/zh_CN/latest/test-doubles.html)

[PHPUnit 入门教程](https://learnku.com/laravel/t/22814)


[PHP 单元测试覆盖率](https://learnku.com/articles/24030)

[phpunit 快速入门](https://learnku.com/articles/22072)

[测试简介](https://learnku.com/docs/phpunit-testing-laravel/1introduction-to-application-testing/2467)

使用 PHPUnit 进行单元和功能测试 https://www.jianshu.com/p/1c929f7fe7ed







