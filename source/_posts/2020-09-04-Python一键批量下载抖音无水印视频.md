---
title: Python一键批量下载抖音无水印视频
date: 2020-09-04 19:54:51
tags:
- 公众号
---
> 苏生不惑第169 篇原创文章，将本公众号设为`星标`，第一时间看最新文章。

关于下载视频之前写过 [如何轻松下载腾讯/微博/优酷/爱奇艺/b站等全网视频？ ](https://mp.weixin.qq.com/s/3rB23e9L55hDBaPLDu6WMg) ， [那些你可能不知道的视频下载奇技淫巧](https://mp.weixin.qq.com/s/5InOxKmi9eXk33G_8N3byQ)

抖音视频也可以直接通过idm来下载，先在抖音复制视频链接。

![image.png](https://upload-images.jianshu.io/upload_images/23152173-b81433ac93df58fd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
用谷歌浏览器打开视频链接后点击视频右上角的idm（公众号后台回复 `idm`获取软件 ）就能下载了 。
![image.png](https://upload-images.jianshu.io/upload_images/23152173-df88680cfaa29bbb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

不过这样下载的视频带有抖音的标志，如果想去除这个水印，下面分享个简单的方法。
![image.png](https://upload-images.jianshu.io/upload_images/23152173-08eacd2883d03b2b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


打开浏览器控制台使用手机模式访问会跳转到   https://www.iesdouyin.com/share/video/6867075534275366148/  
![image.png](https://upload-images.jianshu.io/upload_images/23152173-077ae515ffcb6f96.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
 
可以看到请求接口 https://www.iesdouyin.com/web/api/v2/aweme/iteminfo/?item_ids=6867075534275366148 ，返回值play_addr里就有播放地址url_list  https://aweme.snssdk.com/aweme/v1/playwm/?video_id=v0300fff0000bt6c070r0ed42bvp5uo0&ratio=720p&line=0
这个地址是有水印的，将地址里的playwm改为play就是无水印播放地址了。

下载后播放对比下，左侧的抖音水印没了。
![image.png](https://upload-images.jianshu.io/upload_images/23152173-18d0e20e0d017604.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
无水印视频还少了3秒 ，因为视频结尾的一小段 `来抖音，发现更多创作者` 也没了。
![image.png](https://upload-images.jianshu.io/upload_images/23152173-7e3ed8f04e4716fa.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

当然这样下载无水印视频有点麻烦，一般小白还不会，Python 可以帮你一键下载。

```js
import re
from urllib.parse import urlparse
import requests

headers = {
            'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
            'accept-encoding': 'gzip, deflate, br',
            'accept-language': 'zh-CN,zh;q=0.9',
            'cache-control': 'max-age=0',
            'upgrade-insecure-requests': '1',
            'user-agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.79 Mobile Safari/537.36'
        }
domains = ['www.douyin.com',
           'v.douyin.com',
           'www.snssdk.com',
           'www.amemv.com',
           'www.iesdouyin.com',
           'aweme.snssdk.com']

url = input("请输入你要去水印的抖音短视频链接：")
#url =' https://v.douyin.com/oXbjfe/'
response = requests.get(url,headers=headers,allow_redirects=False)
true_url =response.headers['location']
#print(true_url)
parse_url = urlparse(true_url)
if parse_url.netloc not in domains:
    raise Exception("无效的链接")

vid = re.findall(r'\/share\/video\/(\d*)', parse_url.path)[0]
#print(vid)
response = requests.get('https://www.iesdouyin.com/web/api/v2/aweme/iteminfo/?item_ids='+str(vid))
result = response.json()
#print(result)
item = result.get("item_list")[0]
author = item.get("author").get("nickname")
mp4 = item.get("video").get("play_addr").get("url_list")[0]
cover = item.get("video").get("cover").get("url_list")[0]
mp4 = mp4.replace("playwm", "play")
res = requests.get(mp4, headers=headers, allow_redirects=True)
mp4url = res.url#http://v5-dy-d.ixigua.com/aa21024d9f51deaa2e8ce9ba4f6447f5/5f4cb46c/video/n/tosedge-tos-agsy-ve-0015/ed75a5dbbddf483a8c1382162d31d52f/?a=1128&br=2016&bt=672&cr=0&cs=0&cv=1&dr=0&ds=3&er=&l=202008311526410101980621631104B96C&lr=&mime_type=video_mp4&qs=0&rc=ajM7azNqOXk4dTMzOmkzM0ApOzY6NjZoZWQ6N2UzNjlmNmdpYi0zbnEvMi5fLS1iLS9zczUzLi40NmBhXjEyLzAzYWA6Yw%3D%3D&vl=&vr=
#print(mp4url)
desc = item.get("desc")
mp3 = item.get("music").get("play_url").get("url_list")[0]
#name = input("===>正在下载保存视频,请输入视频名称：")
video = requests.get(url=mp4url, headers=headers)
audio = requests.get(url=mp3, headers=headers)
data = dict()
data['mp3'] = mp3
data['mp4'] = mp4url
data['cover'] = cover
data['nickname'] = author
data['desc'] = desc
data['duration'] = item.get("duration")
#print(data)
with open(desc+".mp4", 'wb') as f, open(desc+".mp3", 'wb') as f2:
    f.write(video.content)
    f.close()
    f2.write(audio.content)
    f2.close()
    print("===>音频和视频下载完成")
```
直接执行脚本 python douyin.py ，很快下载好了。
 ![image.png](https://upload-images.jianshu.io/upload_images/23152173-f40f568d1c0e188f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
 
视频对应的mp3音频http://p9-dy.byteimg.com/obj/ies-music/6867075567041121031.mp3也下载了。
![image.png](https://upload-images.jianshu.io/upload_images/23152173-033a691927734b6a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


除了Python已经有很多不错的软件可以很方便的下载无水印抖音视频了，下面分享几个好用的。


这个软件（公众号后台回复 `抖音 `获取软件）https://www.lanzoux.com/iTKnwgbujgh支持抖音，皮皮虾，快手，火山，微视等平台视频的批量下载，还支持采集视频。
![image.png](https://upload-images.jianshu.io/upload_images/23152173-5510ac0165616198.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![image.png](https://upload-images.jianshu.io/upload_images/23152173-afe2d7d80a25e9d1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
输入抖音视频链接地址 https://v.douyin.com/JkaChFt/  ，点击解析可以看到视频标题和下载链接。
![image.png](https://upload-images.jianshu.io/upload_images/23152173-bf0a68e2df8b6cf1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
还可以输入抖音作者主页地址 https://v.douyin.com/JkaaoTH/ ，解析可以获取作者视频列表。
![image.png](https://upload-images.jianshu.io/upload_images/23152173-b98bcfb40e27c605.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
然后右键下载，很快下载完了。
![image.png](https://upload-images.jianshu.io/upload_images/23152173-704bc4003a28828e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
播放看看，左上方的抖音水印没了。
![image.png](https://upload-images.jianshu.io/upload_images/23152173-ceea74f9427544cc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

 
另外一个软件 抖音信息解读  https://www.lanzoux.com/iUj4ng8st0b ，可以搜索列出作者600多个视频（包含作者头像，视频标题，视频地址，点赞数，评论数，分享数，音乐地址，无水印链接等），在右侧可以选择视频下载。
![image.png](https://upload-images.jianshu.io/upload_images/23152173-26c284e678b4afe6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


分享个网站 抖音排行榜 https://www.jxpie.com/#  https://kolranking.com/
![image.png](https://upload-images.jianshu.io/upload_images/23152173-d055b1c3cbd2fa44.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

> 大家的点赞和在看转发对我非常重要，如果文章对你有帮助还请支持下， 感谢各位！

| 公众号后台回复关键词    |  用途   |
| --- | --- |
| 微信    | 获取你的微信好友头像拼图及查看微信撤回消息    |
|  b站   |  获取下载b站视频工具及找回被删b站视频方法   |
|  视频   |  获取下载腾讯，优酷，爱奇艺，微博视频工具及去除logo脚本   |
|  百度网盘   | 获取加速下载网盘文件方法及查找电影电视剧网站    |
|   朋友圈  |  获取发空白朋友圈方法   |
|  微博   |  获取备份微博工具及分析微博账号数据   |
|  音乐   |   获取下载音乐工具及在线听歌网站  |
|  油猴   |   获取油猴脚本  |
|谷歌|获取安装Chrome扩展方法|
|公众号|一键下载公众号所有文章|
|抖音|一键下载无水印抖音视频|

![免费知识星球，每天更新](https://upload-images.jianshu.io/upload_images/17817191-9d41aa25edcd25c4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

### 公众号 苏生不惑
 ![扫描二维码关注或搜索微信susheng_buhuo](https://upload-images.jianshu.io/upload_images/17817191-6e0079f95d4c0338.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)