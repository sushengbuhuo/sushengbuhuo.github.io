---
title: 微信打开支付宝红包新套路
date: 2019-08-28 20:11:48
tags:
- 公众号
---
最近支付宝的红包活动还在继续，我们知道微信很早就屏蔽了支付宝链接的，连淘宝链接也打不开。但是最近发现朋友圈很多人发了自己的链接点击进去发现居然跳调起浏览器然后转到支付宝了，然后就领了对方的红包，这套路 666，然后找到源代码自己也折腾了下，可惜今天已经被屏蔽了，不过还是值得研究的。
```js
<!DOCTYPE html>

<html lang="zh-cmn-hans">

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta http-equiv="X-UA-Compatible" content="ie=edge, chrome=1">

<title>正在打开支付宝，请稍候……</title>

</head>

<body>

</body>

</html>

<script> 

    //这是你自己的口令链接

var _0 = "https://qr.alipay.com/c1x06944aqsf1qqkpv9of19";  

var _1 = "https://qr.alipay.com/c1x06944aqsf1qqkpv9of19";  

function is_weixin() {

    if (/MicroMessenger/i.test(navigator.userAgent)) {

        return true

    } else {

        return false

    }

}

function is_android() {

    var ua = navigator.userAgent.toLowerCase();

    if (ua.match(/(Android|SymbianOS)/i)) {

        return true

    } else {

        return false

    }

}

function is_ios() {

    var ua = navigator.userAgent.toLowerCase();

    if (/iphone|ipad|ipod/.test(ua)) {

        return true

    } else {

        return false

    }

}

function android_auto_jump() {

    WeixinJSBridge.invoke("jumpToInstallUrl", {},

    function(e) {});

    window.close();

    WeixinJSBridge.call("closeWindow")

}

function ios_auto_jump() {

    if (_0 != "") {

        location.href = _0

    } else {

        window.close();

        WeixinJSBridge.call("closeWindow")

    }

}

function onAutoinit() {

    if (is_android()) {

        android_auto_jump();

        return false

    }

    if (is_ios()) {

        ios_auto_jump();

        return false

    }

}

if (is_weixin()) {

    if (typeof WeixinJSBridge == "undefined") {

        if (document.addEventListener) {

            document.addEventListener("WeixinJSBridgeReady", onAutoinit, false)

        } else if (document.attachEvent) {

            document.attachEvent("WeixinJSBridgeReady", onAutoinit);

            document.attachEvent("onWeixinJSBridgeReady", onAutoinit)

        }

    } else {

        onAutoinit()

    }

} else {

    if (_1 != "") {

        location.href = _1

    } else {

        window.close()

    }

}

</script>
```
以上代码的链接怎么换成自己的呢？参考这篇文章 https://www.jianshu.com/p/b599f85fdbef?from=groupmessage  简单来说就是在支付宝把自己的口令二维码下载到电脑，打开 https://cli.im/deqr  上传图片获取到链接地址，通常我们扫码的结果就是访问这个链接。有了链接后需要用短网址处理，因为微信可能会屏蔽，这就需要 http://dwz.wailian.work/    生成微博的 t.cn 即可 .

好了代码都有了，怎么能在外网访问呢？如果有自己服务器就方便了，没有的话可以用 codeanywhere.com codepen.io jsbin.cn 等， 但比较麻烦，如果你会用 github 就方便了，新建立一个库，代码放上去，比如我的。

![image](https://upload-images.jianshu.io/upload_images/17817191-ddd76ce6ddb85ce5?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

github page 有 3种方式来访问https://gzyq.github.io/2017/04/07/read-github-html/ ：

1.建立仓库名 name.github.io master分支的代码就可以通过name.github.io来反问，但是只能建一个这样的repo 。

2.将新建的repo 代码部署到 gh-pages 分支。

3.在repo settings页面，找到**GitHub Pages**选项，点击 **Source** 下面的 **None** 选项，如下图示，选择**master branch**，最后点击 **Save** 按钮。

完成后就可以用 github.io 域名访问了。比如我的这个链接 lovecn.github.io/wechat_alipay/index.html  如果不加文件名默认访问 readme 

如果不方便新建立 repo 可以将 github 上的文件地址 通过来访问 http://raw.githack.com/  http://htmlpreview.github.com/  将文件地址填入即可生成 url 

说完支付宝红包，最近网易推出2017 你听过的歌单，然后支付宝在 3 号推出了2017 年度账单，朋友圈又刷屏了，我也分享了,17 年消费了 8000 多，理财（主要是余额宝） 2400 多，评价每个月 200 ，今年要多渠道理财了。

![image](https://upload-images.jianshu.io/upload_images/17817191-c2149cd66cf7c2ee?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![image](https://upload-images.jianshu.io/upload_images/17817191-0be2d55c22e2c7ed?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

随后微博上爆出里面的 **《芝麻服务协议》**同意这个协议，你的信息就会被收集，包括在第三方保存的信息，详细见文 [支付宝认错了](https://mp.weixin.qq.com/s?__biz=MzA5MzUwNjUzMA==&mid=2650229122&idx=1&sn=a05d5b651858f762de3e4d49f48fb229&chksm=885f370fbf28be1974bba18340646603c120d798450381888477844460f2e60f73b68acf4a24&mpshare=1&scene=1&srcid=01075GB26lF9DVHm6dC8cRai&pass_ticket=IN9LnCkybB0pS4mH4KbGyhye4ggL9oz9NZxcRoZPRC4MP9O%2FuhNIc9SLwCryUjhQ#rd)

![image](https://upload-images.jianshu.io/upload_images/17817191-2cd8c242ac55bf8f?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

然后微博上 @芝麻信用 进行了回应 https://weibo.com/3732213162/FCHPE5UBk?type=comment#_rnd1515325256703 

所以如果你打开过这个报告，记得这样操作下：在支付宝里点“我的”，然后点“芝麻信用”，然后点“信用管理”，然后点“授权管理”，找到支付宝，就可以解除授权了。

ps：最近看到一个 2017 最佳 50 广告 https://socialbeta.com/toplist2017/commercial-of-the-year ，里面有几个还是不错的，跟拍电影似的，比如京东的《你不必成功》OPPO的《周杰伦的2000万个故事》网易《音乐的力量》999《总有人偷偷爱着你》 有兴趣可以看看。

![image](https://upload-images.jianshu.io/upload_images/17817191-ff53ebf7ddb56575?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
