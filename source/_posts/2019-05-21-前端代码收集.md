---
title: 前端代码收集
date: 2019-05-21 19:17:58
tags:
- 代码
---
### 编辑网页
```javascript
document.designMode = "on"
```

### Console中的技巧
```javascript
chrome会帮你buffer 5个你查看过的DOM对象，你可以直接在Console中用 $0, $1, $2, $3, $4来访问。
你还可以使用像jQuery那样的语法来获得DOM对象，如：$("#mydiv")
你还可使用 $$(".class") 来选择所有满足条件的DOM对象。
你可以使用 getEventListeners($("selector")) 来查看某个DOM对象上的事件
还可以使用 monitorEvents($("selector")) 来监控相关的事件

```
### 将内容复制到剪贴板
```javascript
<input id="demoInput" value="hello world">
<button id="btn">点我复制</button>

const btn = document.querySelector('#btn')
btn.addEventListener('click', () => {
  const input = document.querySelector('#demoInput')
  input.select()
  if (document.execCommand('copy')) {
    console.log('复制成功')
  } else {
    console.log('复制失败')
  }
})
const btn = document.querySelector('#btn')
btn.addEventListener('click', () => {
  const input = document.createElement('input')
  document.body.appendChild(input)
  input.setAttribute('value', '复制我')
  input.select()
  if (document.execCommand('copy')) {
    console.log('复制成功')
  } else {
    console.log('复制失败')
  }
  document.body.removeChild(input)
})

https://blog.mutoe.com/2019/copy-content-to-clipboard-in-javascript/
```
### 微信分享
```javascript
var shareLinkUlr = location.href.split("#")[0]; // 获取当前的url 去掉 # 之后的部分
shareLinkUlr = shareLinkUlr.replace(/\&/g, '%26'); // 将 & 替换成 %26
var shareImgUrl = 'http://www.abc.com/images/logo300.jpg'; // 分享的图片地址
// 获取 config 的内容
function getjssdkconfig(apis,debug,json,link){
    //console.log(apis);
    //console.log(debug);
    //console.log(json);
    //console.log(link);
    var xhr = new XMLHttpRequest();
    var url = 'http://www.abc.com/qxj_jssdkconfig'; // 这个就是easywechat生成的参数
    var data = "apis="+apis+"&debug="+debug+"&json="+json+"&url="+link; // 拼接 get 参数
    xhr.open('GET',url+"?"+data);
    xhr.onreadystatechange = function(){
        if(xhr.readyState===4 && (xhr.status >=200 && xhr.status <=300)){
            // 获取 config 之后，进行一些操作
            // 需要进行 JSON.parse 获取对象
            configJsSDKAndDoSomething(JSON.parse(xhr.responseText));
        }
    };
    xhr.send();
}
// 获取config 之后进行的操作
// 因为是使用 ajax 进行config内容，这个方法是在上面运行的
function configJsSDKAndDoSomething(config){
    wx.config(config);
    wx.ready(function() {
        // 其他的一些操作
        // ...

        //不是wifi环境下提示
        wx.getNetworkType({
            success: function (res) {
                var networkType = res.networkType; // 返回网络类型2g，3g，4g，wifi
                if(networkType!="wifi"){
                    console.log("当前你网络环境为"+networkType+"");                    
                }
            }
        });
    });
    wx.error(function(error){
        console.log(error);
    });
    wx.onMenuShareTimeline({
        title: '', // 分享标题
        link: location.href, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
        imgUrl:shareImgUrl, // 分享图标
        success: function () {
            alert('分享成功');
        }
    });
    wx.onMenuShareAppMessage({
        title: '', // 分享标题
        desc: '', // 分享描述
        link: location.href, // 分享链接，该链接域名或路径必须与当前页面对应的公众号JS安全域名一致
        imgUrl: shareImgUrl, // 分享图标
        type: 'link', // 分享类型,music、video或link，不填默认为link
        success: function () {

        },
        cancel: function () {

        }
    });
}
// 页面加载完之后进行操作
$(document).ready(function(){
    // 注意这里的参数
    // apis 使用的参数是 字符串的拼接 这个是和 php 的方法中的处理相对应的
    getjssdkconfig("checkJsApi,onMenuShareTimeline,onMenuShareAppMessage,onMenuShareQQ,onMenuShareWeibo,onMenuShareQZone,hideMenuItems,showMenuItems,hideAllNonBaseMenuItem,showAllNonBaseMenuItem,translateVoice,startRecord,stopRecord,onVoiceRecordEnd,playVoice,onVoicePlayEnd,pauseVoice,stopVoice,uploadVoice,downloadVoice,chooseImage,previewImage,uploadImage,downloadImage,getNetworkType,openLocation,getLocation,hideOptionMenu,showOptionMenu,closeWindow,scanQRCode,chooseWXPay,openProductSpecificView,addCard,chooseCard,openCard",false,false,shareLinkUlr);
});
https://learnku.com/laravel/t/30886
```
### 支付宝转账恶搞
```javascript
(function() {
    /** 支付宝恶搞 **/
    function inc(el) { // 更新金额数字
        el.innerHTML = el.innerHTML.replace(/\d+/, function(a) {
            return +a + rnd(9);
        });
    }

    function rnd(n) { // 1-n 随机数https://www.cnblogs.com/52cik/p/js-alipay-jokes.html
        return Math.random() * n | 0;
    }

    function joke(el) { // 随机增加
        inc(el);
        setTimeout(joke, rnd(1e3), el);
    }

    var amount = document.getElementsByClassName("amount");

    joke(amount[0]); // 账户余额 随机增加
    joke(amount[1]); // 余额宝 随机增加
})();
```
### 奇葩字符（不可见字符）
```javascript
 é 字符，他的 unicode 是 \u00e9, 但是也可以用 'e' + '\u0301' 实现 "é" 前者 length 是 1，后者 length 是 2。
'\u0301' 在这里起到了语调符的作用，然后我就丧心病狂的  'e'+Array(20).join('\u0301');  

 '呵呵'+Array(20).join('\u0310');  // "呵呵̐̐̐̐̐̐̐̐̐̐̐̐̐̐̐̐̐̐̐"
 '呵呵'+Array(20).join('\u031D');             // "呵呵̝̝̝̝̝̝̝̝̝̝̝̝̝̝̝̝̝̝̝"
 '呵呵'+Array(20).join('\u0E47');                          // "呵呵็็็็็็็็็็็็็็็็็็็"
 '呵呵'+Array(20).join('\u0e49');                                       // "呵呵้้้้้้้้้้้้้้้้้้้"
 '呵呵'+Array(20).join('\u0598');        // "呵呵֘֘֘֘֘֘֘֘֘֘֘֘֘֘֘֘֘֘֘"

也可以这么玩...

 '呵呵'+Array(20).join('\u0310')+Array(20).join('\u0598')+Array(20).join('\u0e49');  // "呵呵้้้้้้้้้้้้้้้้้้้̐̐̐̐̐̐̐̐̐̐̐̐̐̐̐̐̐̐̐֘֘֘֘֘֘֘֘֘֘֘֘֘֘֘֘֘֘֘"
http://www.fileformat.info/info/unicode/category/Mn/list.htm  
这里详细的列出了每个编码以及对应的意思，还有图片展现。https://www.cnblogs.com/52cik/p/unicode-mark-nonspacing.html#!comments
```
### Chrome 监听 console 打开
```javascript
var re = /x/;
var i = 0;
console.log(re);

re.toString = function () {
  return '第 ' + (++i) + ' 次打开控制台';//https://www.52cik.com/2016/04/27/chrome-console-open.html
};
```
### 操作之神奇的 date
```javascript
// 获取月份天数
function getMonthDayCount(year, month) {
  return new Date(year, month, 0).getDate();
}
console.log(getMonthDayCount(2017, 10)); // 31
function getAllMonthDayCount(year) {
  var days = [31, new Date(year, 2, 0).getDate(), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
  return days;
}
console.log(getAllMonthDayCount(2016));// [31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]
function isLeapYear(year) {
  return (year % 4 == 0) && (year % 100 != 0 || year % 400 == 0);
}
function isLeapYear(year) {
  return new Date(year, 2, 0).getDate() === 29;
}
console.log([
  isLeapYear(2000),
  isLeapYear(2016),
  isLeapYear(2017),
  isLeapYear(2018)
]); // [ true, true, false, false ]
// 10天后是几月几号
var dt = new Date('2016-12-25');
dt.setDate(dt.getDate() + 10);
console.log(dt.toLocaleDateString()); // 2017/1/4


// 10天前是几月几号https://www.52cik.com/2017/10/11/js-date-month.html
var dt = new Date('2017-01-04');
dt.setDate(dt.getDate() - 10);
console.log(dt.toLocaleDateString()); // 2016/12/25
```
### 日期是否是连续
```javascript
let days = [
  '2016-02-28',
  '2016-02-29', // 闰月
  '2016-03-01', // 跨月
  '2016-03-02',
  '2016-03-03',
]

// 先排序，然后转时间戳
let _days = days.sort().map((d, i) => {
  let dt = new Date(d)
  dt.setDate(dt.getDate() + 4 - i) // 处理为相同日期

  return +dt
})

// 比较时间戳是否一致
console.log(
  _days[0] == _days[1] &&
  _days[0] == _days[2] &&
  _days[0] == _days[3] &&
  _days[0] == _days[4]
)
let days = [
  '2016-02-28 12:00:00',
  '2016-02-29 12:00:01', // 闰月
  '2016-03-01 12:00:02', // 跨月
  '2016-03-02 12:00:03',
  '2016-03-03 12:00:04',
  '2016-03-04 12:00:04',
]

console.log(continueDays(days))

function continueDays(arr_days) {
  // 先排序，然后转时间戳
  let days = arr_days.sort().map((d, i) => {
    let dt = new Date(d)
    dt.setDate(dt.getDate() + 4 - i) // 处理为相同日期

    // 抹去 时 分 秒 毫秒
    dt.setHours(0)
    dt.setMinutes(0)
    dt.setSeconds(0)
    dt.setMilliseconds(0)

    return +dt
  })

  let ret = true

  days.forEach(d => {
    if (days[0] !== d) {
      ret = false
    }
  })

  return ret
}https://www.52cik.com/2016/07/10/consecutive-dates.html
```
[JS 数据结构](https://learnku.com/articles/31533)

[CHROME开发者工具的小技巧](https://coolshell.cn/articles/17634.html)

[chrome开发者工具各种骚技巧](https://juejin.im/post/5af53823f265da0b75282b0f#heading-11)

[webpack笔记-服务及热更新](https://neuqzxy.github.io/2017/11/16/webpack%E7%AC%94%E8%AE%B0-%E6%9C%8D%E5%8A%A1%E5%8F%8A%E7%83%AD%E6%9B%B4%E6%96%B0/)

[JavaScript编程黑科技](https://zhuanlan.zhihu.com/p/28937831)

[中文文案排版规范](https://learnku.com/docs/writing-docs/typography/3957)

[前端每日 30 秒](https://github.com/pushmetop/30-seconds-for-everyday)

[Chrome断点JS寻找淘宝签名sign](https://zhangslob.github.io/2018/12/21/Chrome%E6%96%AD%E7%82%B9JS%E5%AF%BB%E6%89%BE%E6%B7%98%E5%AE%9D%E7%AD%BE%E5%90%8Dsign/)

[HTML 实现采集拍照功能](https://recordrtc.org/)

[微信分享踩坑之旅](http://nullpointer.pw/%E5%BE%AE%E4%BF%A1%E5%88%86%E4%BA%AB%E8%B8%A9%E5%9D%91%E4%B9%8B%E6%97%85.html)

[字符编码那些事儿](http://cuihuan.net/2019/05/12/%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E9%82%A3%E4%BA%9B%E4%BA%8B%E5%84%BF/)









